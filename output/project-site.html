<!doctype html>
<html class="no-js" lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Managing your project web site - Apache Infrastructure</title>
    <link rel="stylesheet" href="/theme/css/foundation.css">
    <link rel="stylesheet" href="/theme/css/app.css">
    <link rel="stylesheet" href="/theme/css/font-awesome.min.css">
    <style type="text/css">
      .frontbox {
        border-radius: 8%;
        border: 1px solid #999; background: #444; color: #EEE; padding: 6px; margin: 3px;
      }
      .frontbox:hover {
        border-top: 4px solid #1583CC;
        margin-top: 0px;
        cursor: pointer;
      }
      .clickable {
	/* height was reduced by 40% */	
	height: 60%;
        width: 30%;
        position: absolute;     
        z-index: 1;
      }
    </style>  </head>
  <body style="background: #C9B191;">
    <!-- Menu bar --->
    <div class="row">
      <div class="top-bar" style="padding: 0; margin-bottom: 10px; background: #222; border: 1px solid #DDD; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px;">
        <div class="hide-for-small-only">
          <div class="top-bar-left">
            <ul class="menu" style="background: #222; padding: 0px; line-height: 1; border-bottom-left-radius: 4px;">
              <li class="notable-logo"><a href="/" target="_self" style="padding: 3px; padding-left: 7px;">
                <img style="vertical-align: middle;" src='/theme/images/feather.png' width='18'/><span style="font-size: 1.30rem; color: #1583CC; text-transform: uppercase;">Apache Infrastructure</span></a>
              </li>
            </ul>
          </div>
          <div class="top-bar-right">
            <ul class="dropdown menu horizontal" data-dropdown-menu style="background: #222; font-size: 0.8rem; text-transform: uppercase; padding-top: 5px;">
              <li class="is-dropdown-submenu-parent">
                <a href="#" target="_self" style="padding-left: 7px;">About</a>
                <ul class="menu" style="background: #222; font-size: 0.7rem; text-transform: uppercase; padding-top: 5px; margin-top: 5px;">
                  <li><a href="/team.html">About the team</a></li>
		  <li><a href="https://blogs.apache.org/infra/" target="_blank">The Infra Blog</a></li>			
		  <li><a href="/roadmap.html">Strategies & Roadmap</a></li>
	          <li><a href="/volunteer.html">Volunteer with Infra</a></li>
                </ul>
              </li>
                           
              <li class="is-dropdown-submenu-parent">
                 <a href="#" target="_self" style="padding-left: 0px;">Services and Tools</a>
                <ul class="menu" style="background: #222; font-size: 0.7rem; text-transform: uppercase; padding-top: 5px; margin-top: 5px;">
		<li><a href="/services-tools.html">Services and Tools</a></li>
                <li><a href="https://www.apache.org/dev/machines.html" target="_blank" >Fingerprints</a></li>
                <li><a href="https://blocky.apache.org" target="_blank" >Blocky</a></li>
                <li><a href="https://uls.apache.org/app/kibana#/discover?_g=()" target="_blank" >Kibana and Unified Logging System</a></li>
		<li><a href="https://app.datadoghq.com/account/login?next=%2Finfrastructure" target="_blank" >DataDog</a></li>
		<li><a href="https://whimsy.apache.org/roster/committer/" target="_blank" >Committer Search</a></li>
		<li><a href="/mirror-howto.html">Become an ASF download mirror</a></;i>
                </ul>
              </li>
              <li><a href="/doc.html" target="_blank" style="padding-left: 5px;">Documentation</a></li>
	      <li class="is-dropdown-submenu-parent">
                 <a href="#" target="_self" style="padding-left: 0px;">Status and Issues</a>
		  <ul class="menu" style="background: #222; font-size: 0.7rem; text-transform: uppercase; padding-top: 5px; margin-top: 5px;">
		    <li><a href="https://status.apache.org" target="_blank" style="padding-left: 5px;">Status</a></li>
                    <li><a href="https://cwiki.apache.org/confluence/display/INFRA/Known+issues" target="_blank" style="padding-left: 5px;" >Known Issues</a></li>
		 </ul>
              </li>
              <li><a href="/contact.html" style="padding-left: 5px;"><i class="fa fa-weixin" style="color: #FFF; font-size: 0.9rem;"></i>Contact us</a></li>
            </ul>
          </div>
        </div>
      </div>
    </div>    
    <!-- bread crumb -->
    <div class="row">
      <div class="large-12 columns" style="font-size: 0.8rem; background-color: rgba(255,255,255,0.75); margin-bottom: 5px;">
        <a href="/">Home</a>
        <i class="fa fa-angle-double-right"></i>
        <a href="/project-site.html">
Managing your project web site        </a>
      </div>
    </div>
    
    
    <!-- contents -->
    <div class="row">
      <div class="large-12 columns">
        <div class="callout">
          <h2>
              Managing your project web site
          </h2>
              <p>This page provides an overview of the tools Apache projects use to manage their own websites, and the tools Infra uses to manage the overall <code>apache.org</code> website. Everyone, even non-committers, can suggest changes to any Apache project website using these tools; committers on each project can use them to update their website very easily.</p>
<h2>Contents</h2>
<ul>
<li><a href="#intro">Managing an Apache project's website</a></li>
<li><a href="#default">Is there a default website template?</a></li>
<li><a href="#preview">Previewing a project website</a></li>
<li><a href="#configure">Configuring a project webstie</a></li>
<li><a href="#logging">Logging</a></li>
<li><a href="#which-tools-do-i-have-to-use">Site support tools</a></li>
<li><a href="#svnpubsub-revision">Finding the site revision number</a></li>
<li><a href="#mail">Providing public access to the project mail archive mbox files</a></li>
<li><a href="#feather">Using the project's favicon instead of the Apache feather</a></li>
<li><a href="#generated">Minimizing the number of changes committed in the project's Maven- or JavaDoc- generated site</a></li>
</ul>
<h2 id="intro">Managing an Apache project's website</h2>
<p>Every Apache project or podling has a website hosted at <code>apache.org</code>. Apache provides tools to maintain it. Each project decides how their website looks, its contents, how they maintain it, and what software they use to support it, as long as the result is static files that our public web servers can make available to browsers. We also have limited support for .htaccess files and CGI scripts.</p>
<p>The basic requirements for site management are that</p>
<ul>
<li>only committers should be able to modify the site.</li>
<li>notifications of all site changes should be sent to the relevant project mailing lists. The Apache CMS allows non-committers to send  patches via a simple web interface by &quot;Mail Diff&quot;ing to the project  mailing list that can be easily published by a committer.</li>
</ul>
<p>Infra supports these tools for publishing and maintaining Apache project websites:</p>
<ul>
<li><strong>Apache CMS</strong>, <em>(being deprecated; don't use for new sites)</em> provides a simple browser-based user interface for editing, staging and publishing site content in Markdown, HTML or any other source format for which support has been added. See the <a href="cmsref">CMS reference</a> and <a href="cmsadoption">adoption</a> for more details. The Apache CMS uses pypubsub as the underlying mechanism for publishing a site.</li>
<li><strong>svnpubsub</strong> automatically publishes the static contents of a designated svn folder (<a href="https://svn.apache.org/repos/asf/ant/site/ant/production/" target="_blank">example</a>) as the project web site at <code>http://project.apache.org</code>&gt;. The project team can use any site build mechanism it wants as long as the above requirements are met.</li>
<li><strong>gitpubsub</strong> automatically serves the static contents of a designated git as the website for a project. Git-based websites are typically maintained in a asf-site branch to be published as <code>https://project.apache.org</code>. A project can host the site from its primary project repo. Typically these will be built as a jenkins or a buildbot job. We recommend that you only have a single writer to the asf-site branch to avoid potential conflicts.</li>
</ul>
<h2 id="default">Is there a default website template?</h2>
<p>Projects are free to choose their own styles and layout for websites. However if you'd like a quick way to get started with an easy-to-use, Markdown-based site that many other projects started with, see the <a href="https://github.com/apache/apache-website-template">Sample Apache Project website</a> repo, which has many useful features and instructions for using svnpubsub easily.</p>
<h2 id="preview">Previewing a project website</h2>
<ul>
<li>For svnpubsub sites, review the local files in your svn checkout before committing them. The changes will be published immediately after you commit them.</p></li>
<li>For CMS sites, just commit the changes (without &quot;publish&quot;-ing them) and browse to <code>&gt;http://TLP.staging.apache.org/</code>. (For example, <a href="https://www.staging.apache.org/dev/project-site">the staging version of this page</a>.)  The CMS web interface includes a <code>Staged</code> link that will take you there directly.</li>
<li>There is no preview mode for gitpubsub. You should ideally have a way to locally build and test the website.</li>
</ul>
<h2 id="configure">Configuring a project website</h2>
<p>The central config file lets you use <code>.htaccess</code> files in your website directories to control configuration. Of course, reading and
parsing an <code>.htaccess</code> file on each request can slow down the server, so consider requesting adjustments to the central config file for
permanent, site-wide configuration changes.</p>
<h2 id="logging">Logging</h2>
<p>The build output from your job when you compile your site is available from either buildbot or jenkins, depending on which you use.</p>
<h2 id="which-tools-do-i-have-to-use">Site support tools</h2>
<p>Projects use one of the three options mentioned earlier, although the CMS option is not available for new websites. <strong>Note</strong> that if you use CMS you are using svnpubsub under the covers.</p>
<p>Gitpubsub is based on git repos, so if you're using Git for source control it may make sense to use that instead of a svnpubsub directory.</p>
<h2 id="svnpubsub-revision">Finding the site revision number</h2>
<p>This only applies to <em>SVN based websites</em>.</p>
<p>Look at the <code>.revision</code> file at the root of your site (for example, &lt;a href=&quot;<a href="http://subversion.apache.org/.revision">http://subversion.apache.org/.revision</a>&quot; target&quot;_blank&quot;&gt;&gt;<a href="http://subversion.apache.org/.revision">http://subversion.apache.org/.revision</a></a>). That file updates after every successful <code>svn update</code>. (If the update is underway or exited abnormally, <code>.revision</code> won't have been changed.)</p>
<h2 id="mail">Providing public access to the project's mail archive mbox files</h2>
<p>Some projects have a &quot;mail&quot; directory at the top of their project website. Enable this by creating a symbolic link  to <code>/home/apmail/public-arch/$tlp.apache.org</code> in svnpubsub or CMS output.</p>
<p>See more <a href="https://apache.org/dev/#mail" target="_blank">notes aboout project mail</a>.</p>
<h2 id="feather">Using the project's favicon instead of the Apache feather</h2>
<p>To use a custom favicon for your project's website, add the <code>favicon.ico</code> file to your site's root directory. The feather only appears for project sites that don't have a <code>favicon.ico</code> file.</p>
<h2 id="generated">Minimizing the number of changes committed in the project's Maven- or JavaDoc- generated site</h2>
<p>If you are using svnpubsub, the commit performs very slowly if the number of changes is large, particularly if the number of files is large. This is often the case with JavaDoc, and to a lesser extent with Maven-generated sites. Here is what you can do to speed up the commit:</p>
<ul>
<li>Ask Infra to store your generated content in the CMS repository, rather than the main ASF repository. While this won't necessarily speed up your own commit, it will prevent it from impacting other users.</li>
<li>When running JavaDoc, pass the <code>-notimestamp</code> option. This will avoid most files from being modified between runs if there haven't been code changes.</li>
<li>Use a Maven skin that doesn't generate a timestamp into the output. This may require customizing the current skins.</li>
<li>If you use the Maven dependencies report in the Project Info Reports plugin, use version 2.7+ of the plugin to avoid random strings being generated.</li>
<li>If you maintain historical versions of documentation, always check-in to a single &quot;trunk&quot;, then use an <code>svn copy</code> operation to tag or branch the content, rather than checking in a complete copy.</li>
<li>Minimize use of &quot;publish date&quot; and &quot;version&quot; in templates to those that are truly necessary or helpful. Consider using a &quot;last modified date&quot; and version in the URL instead (unless &quot;latest&quot; is implied).</li>
<li>Minimize Subversion keywords in the output that may change frequently without significant meaning. This includes keywords in source code that may be rendered to JavaDoc or a Maven JXR source cross-reference.</li>
<li>Avoid publishing Maven reports that change constantly to the project site. Code coverage, style reports, static analysis, etc. can be generated into a working copy on the CI server instead for easy developer viewing, and projects can consider using <a href="https://analysis.apache.org/" target="_blank"><a href="https://analysis.apache.org/">https://analysis.apache.org/</a></a> for such reports as well.</li>
</ul>

        </div>
      </div>
    </div>
    </div>    
    <!-- footer -->
    <div class="row">
      <div class="large-12 medium-12 columns">
        <p style="font-style: italic; font-size: 0.8rem; text-align: center;">
          Copyright 2020, <a href="https://www.apache.org/">The Apache Software Foundation</a>, Licensed under the <a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a>.<br/>
          Apache&reg; and the Apache feather logo are trademarks of The Apache Software Foundation...
        </p>
      </div>
    </div>    
    <script src="/theme/js/vendor/jquery.js"></script>
    <script src="/theme/js/vendor/what-input.js"></script>
    <script src="/theme/js/vendor/foundation.js"></script>
    <script src="/theme/js/app.js"></script>
  </body>
</html>
