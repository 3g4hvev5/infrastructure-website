<!doctype html>
<html class="no-js" lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Subversion basics - Apache Infrastructure</title>
    <link rel="stylesheet" href="/theme/css/foundation.css">
    <link rel="stylesheet" href="/theme/css/app.css">
    <link rel="stylesheet" href="/theme/css/font-awesome.min.css">
    <style type="text/css">
      .frontbox {
        border-radius: 8%;
        border: 1px solid #999; background: #444; color: #EEE; padding: 6px; margin: 3px;
      }
      .frontbox:hover {
        border-top: 4px solid #1583CC;
        margin-top: 0px;
        cursor: pointer;
      }
      .clickable {
	/* height was reduced by 40% */	
	height: 60%;
        width: 30%;
        position: absolute;     
        z-index: 1;
      }
    </style>
    <link rel="stylesheet"
          href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.0/styles/default.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.0/highlight.min.js"></script>  </head>
  <body style="background: #C9B191;">
    <!-- Menu bar --->
    <div class="row">
      <div class="top-bar" style="padding: 0; margin-bottom: 10px; background: #222; border: 1px solid #DDD; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px;">
        <div class="hide-for-small-only">
          <div class="top-bar-left">
            <ul class="menu" style="background: #222; padding: 0px; line-height: 1; border-bottom-left-radius: 4px;">
              <li class="notable-logo"><a href="/" target="_self" style="padding: 3px; padding-left: 7px;">
                <img style="vertical-align: middle;" src='/theme/images/feather.png' width='18'/><span style="font-size: 1.30rem; color: #1583CC; text-transform: uppercase;">Apache Infrastructure</span></a>
              </li>
            </ul>
          </div>
          <div class="top-bar-right">
            <ul class="dropdown menu horizontal" data-dropdown-menu style="background: #222; font-size: 0.8rem; text-transform: uppercase; padding-top: 5px;">
              <li class="is-dropdown-submenu-parent">
                <a href="#" target="_self" style="padding-left: 7px;">About</a>
                <ul class="menu" style="background: #222; font-size: 0.7rem; text-transform: uppercase; padding-top: 5px; margin-top: 5px;">
                  <li><a href="/team.html">About the team</a></li>
		  <li><a href="https://blogs.apache.org/infra/" target="_blank">The Infra Blog</a></li>			
		  <li><a href="/roadmap.html">Strategies & Roadmap</a></li>
	          
                </ul>
              </li>
              <li><a href="/policies.html" target="_blank" style="padding-left: 5px;">Policies</a></li>
                           
              <li class="is-dropdown-submenu-parent">
                 <a href="#" target="_self" style="padding-left: 0px;">Services-Tools</a>
                <ul class="menu" style="background: #222; font-size: 0.7rem; text-transform: uppercase; padding-top: 5px; margin-top: 5px;">
		<li><a href="/services.html">Services and Tools</a></li>
                <li><a href="https://www.apache.org/dev/machines.html" target="_blank" >Fingerprints</a></li>
                <li><a href="https://blocky.apache.org" target="_blank" >Blocky</a></li>
                <li><a href="https://uls.apache.org/app/kibana#/discover?_g=()" target="_blank" >Kibana and Unified Logging System</a></li>
		<li><a href="https://app.datadoghq.com/account/login?next=%2Finfrastructure" target="_blank" >DataDog</a></li>
		<li><a href="https://whimsy.apache.org/roster/committer/" target="_blank" >Committer Search</a></li>
		
                </ul>
              </li>
              <li><a href="/doc.html" target="_blank" style="padding-left: 5px;">Documentation</a></li>
	       <li class="is-dropdown-submenu-parent">
                 <a href="#" target="_self" style="padding-left: 0px;">Contribute</a>
                <ul class="menu" style="background: #222; font-size: 0.7rem; text-transform: uppercase; padding-top: 5px; margin-top: 5px;">	
		   <li><a href="/infra-volunteer.html">Volunteer with Infra</a></li>
		   <li><a href="/how-to-mirror.html">Become an ASF download mirror</a></li>
			<li><a href="/hosting-external-agent.html">Host a Jenkins or Buildbot agent</a></li>
		 </ul>
	       </li>
	      
              <li><a href="/stats.html" target="_blank" style="padding-left: 5px;">Status</a></li>
              <li><a href="/contact.html" style="padding-left: 5px;"><i class="fa fa-comments" style="color: #FFF; font-size: 0.9rem;"></i>Contact us</a></li>
            </ul>
          </div>
        </div>
      </div>
    </div>    
    <!-- bread crumb -->
    <div class="row">
      <div class="large-12 columns" style="font-size: 0.8rem; background-color: rgba(255,255,255,0.75); margin-bottom: 5px;">
        <a href="/">Home</a>
        <i class="fa fa-angle-double-right"></i>
        <a href="/svn-basics.html">
Subversion basics        </a>
        (<a href="https://github.com/apache/infrastructure-website/tree/master/content/pages/svn-basics.md">edit</a>)
      </div>
    </div>
    
    
    <!-- contents -->
    <div class="row">
      <div class="large-12 columns">
        <div class="callout">
          <h2>
              Subversion basics
          </h2>
              <p>Our developers are located all around the world. To enable them to work together on our software, we keep the source code in Internet-accessible revision control systems, <a href="git.html">Git</a> and Subversion (SVN).</p>
<p>Apache committers have write access to the Apache Subversion repository so they can make changes to their project's source code. Everyone has read access to the repositories, so you may download the most up-to-date development version of software that interests you.</p>
<p>If you are looking for a stable release of a project's source code, you should download it from the <a href="http://www.apache.org/dyn/closer.cgi/" target="_blank">distribution directory</a>. Only download directly from the SVN repository if you want to be on the <em>bleeding-edge</em> of the development effort. The code contained there may fail to work, and may even eat your hard drive.</p>
<h2>Accessing the Subversion repository</h2>
<p>There are several ways to access the Subversion repository:</p>
<p><strong>Web Access</strong></p>
<p>If you just wish to browse around or download a few individual files, the best tool is the web-based <a href="http://svn.apache.org/viewvc/" target="_blank">ViewVC interface for Subversion</a>. You can also go straight to the <a href="http://svn.apache.org/repos/asf/" target="_blank">public repository</a>.</p>
<p><strong>Anonymous Subversion</strong></p>
<p>To access the Subversion repository anonymously, you need a Subversion client.</p>
<p><strong>Finding the project you want</strong></p>
<p>You can <a href="http://svn.apache.org/repos/asf/" target="_blank">browse</a> for the project that interests you and check it out. For example, to get the Spamassassin module, use:</p>
<p><code>$ svn checkout http://svn.apache.org/repos/asf/spamassassin/trunk spamassassin</code></p>
<p>For more help on using Subversion, consult the <a href="http://subversion.tigris.org/" target="_blank">Subversion website</a> or this free <a href="http://subversion.tigris.org/" target="_blank">Subversion book</a>. The website provides a list of clients and useful links.</p>
<p><strong>Committer Subversion access</strong></p>
<p>We currently use HTTPS basic authentication for logging in to Subversion (certificate info below). To change your password, visit <a href="https://svn.apache.org/change-password" target="_blank">svn.apache.org/change-password</a>.</p>
<p>This will prompt you to enter a svn password of your choice. If you cannot log in, or have lost your password, visit the <a href="https://id.apache.org" target="_blank">Apache Account Utility</a> to reset it.</p>
<p>When you make changes to the repository, you can commit them with your username/password combination, i.e.</p>
<pre><code>$ svn co https://svn.apache.org/repos/asf/excalibur/trunk/ excalibur-trunk
$ cd excalibur-trunk
$ echo &quot;test&quot; &gt; test.txt
$ svn add test.txt
$ svn commit --username your-name --password your-password \
  --message &quot;Trying out svn&quot;
</code></pre>
<p><code>svnserve</code> is not supported, nor is <code>svn+ssh</code>.</p>
<h2>Configuring the Subversion client</h2>
<p>Committers need to configure their svn client properly. One particular issue is OS-specific line endings for text files. When you add a new text file, especially when applying patches from Bugzilla, first ensure that the line-endings are appropriate for your system, then do:</p>
<pre><code>svn add test.txt svn propset svn:eol-style native test.txt
</code></pre>
<p>Your svn client can be configured to do that automatically for some common file types.</p>
<p>Add the contents of the file <code>http://www.apache.org/dev/svn-eol-style.txt</code> to the bottom of your <code>~/.subversion/config</code> file. For Windows this is normally found at <code>C:\\Documents and Settings\\{username}\\Application Data\\Subversion\\config</code> -or- For Windows 7 at <code>C:\\Users\\{username}\\AppData\\Roaming\\Subversion\\config]</code></p>
<p>You may need to set additional properties for some files. For example, apply <code>svn:executable=*</code> to script files (.bat, .cgi, .cmd, .sh) that are intended to be executed. Since not all such files are necessarily intended to be executed, do not make the executable property an automatic default.</p>
<p>Pay attention to the messages from your svn client when you do <code>svn commit</code>.</p>
<p><strong>Tip</strong>: If you use TortiseSVN, a popular Windows GUI client that integrates with Windows Explorer, you can right-click in Explorer, select <code>TortiseSVN - Settings</code>, and select &quot;Edit&quot; to update your Subversion configuration file. Copy the above <code>svn-eol-style.txt</code> file's contents into the end of the configuration file that appears, and save the file.</p>
<h2>SSL Server certificate</h2>
<p>The server certificate for <code>https://svn.apache.org/</code> is a real SSL certificate. However, Subversion, by default, does not currently ship with a list of trusted CAs. So, here's some information to help you verify the validity of our cert:</p>
<pre><code>Hostname: *.apache.org
Valid: from Mon, 19 Dec 2011 22:00:00 GMT until Mon, 17 Feb 2014 21:59:59 GMT
Issuer: Thawte, Inc., US
Fingerprint: bc:5f:40:92:fd:6a:49:aa:f8:b8:35:0d:ed:27:5e:a6:64:c1:7a:1b
</code></pre>
<p>Note that the SSL certificate for our Subversion repository is different from certificates used when logging into Apache infrastructure - please see the <a href="new-committers-guide.html">New Committer's guide</a> for more information.</p>
<h2>Problems with Subversion?</h2>
<p><strong>&quot;Error validating server certificate&quot; errors</strong></p>
<pre><code>Error validating server certificate for 'https://svn.apache.org:443':
 - The certificate is not issued by a trusted authority. Use the
   fingerprint to validate the certificate manually!
Certificate information:
 - Hostname: *.apache.org
 - Valid: from Tue, 20 Dec 2011 00:00:00 GMT until Mon, 17 Feb 2014 23:59:59 GMT
 - Issuer: Thawte, Inc., US
 - Fingerprint: bc:5f:40:92:fd:6a:49:aa:f8:b8:35:0d:ed:27:5e:a6:64:c1:7a:1b
(R)eject or accept (t)emporarily
</code></pre>
<p>On some platforms, the root Thawte certificate used to sign the Apache SSL certificate is not made available to OpenSSL and Subversion. Fix this by downloading the Thawte root certificate, and updating your Subversion servers file accordingly to use it for SSL validation:</p>
<ol>
<li>
<p>Save the <a href="https://www.thawte.com/roots/thawte_Premium_Server_CA.pem" target="_blank">Thawte root certificate</a> (in .pem format) to a suitable path, for example, in your <code>~/.subversion/</code> directory; or, on Windows, in the <code>%USERPROFILE%\AppData\Roaming\Subversion\</code> folder.</p>
</li>
<li>
<p>In the servers file in the same folder, add the following to the [global] section, adding the section if required, and amending the path appropriately:</p>
</li>
</ol>
<pre><code>  [global]
  ssl-authority-files = /full/path/to/thawte_Premium_Server_CA.pem
  ssl-trust-default-ca = true
</code></pre>
<p>The Subversion operation should now succeed. In some cases, you may need to move to a more recent svn client.</p>
<p><strong>&quot;svn: No such revision 765287&quot; errors</strong></p>
<p>If you're getting an error message like the following:</p>
<p><code>svn: No such revision 765287</code></p>
<p>This may be because of a short lag in the synchronization between Subversion mirrors, and can occur if multiple commits run immediately after each other. This error usually only happens if you are located in Europe, or are explicitly using the European mirror.</p>
<p>Waiting for ten seconds and repeating the command should succeed.</p>
<p><strong>&quot;specified baseline is not the latest baseline&quot; errors</strong></p>
<p>If you're getting an error message like the following:</p>
<pre><code>svn: Commit failed (details follow):
svn: The specified baseline is not the latest baseline, so it may not be checked out.
</code></pre>
<p>This may be because of a short lag in the synchronization between Subversion mirrors, and can occur if multiple commits run immediately after each other. This error usually only happens if you are located in Europe, or explicitly using the European mirror.</p>
<p>Waiting for ten seconds and repeating the command should succeed.</p>
<p><strong>&quot;Compressed stream invalid&quot; errors</strong></p>
<p>If you're getting an error message like the following:</p>
<pre><code>svn: PROPFIND of '/repos/asf/foobar':
Compressed stream invalid (https://svn.apache.org)
</code></pre>
<p>That's a known issue in the neon client library which has been fixed in neon 0.24.7. A workaround is to disable compression in your client. Edit <code>~/.subversion/servers</code>:</p>
<p>Uncomment the <em>global</em> section if neccessary, and add a line that reads</p>
<pre><code>http-compression = no
</code></pre>
<p>That should &quot;fix&quot; the problem until you can upgrade neon.</p>
<p><strong>Problems using date revisions</strong></p>
<p>If you are using a date revision such as <code>-r{2004-09-12}:{2004-08-12}</code> and not getting any or all of the revisions you expected, this is a known problem specific to the ASF repository.</p>
<p>Unfortunately, there is nothing that can be done to improve this situation, so you must use a workaround. You can use svn log or ViewVC to locate the first actual revision number after the date you desire, and substitute that into your -r argument to the svn command.</p>
<p>For example, consider the desired command:</p>
<p><code>$ svn diff -rHEAD:{2005-01-01}</code></p>
<p>When this produces no output, running svn log alone shows:</p>
<pre><code>------------------------------------------------------------------------
r124032 | aheritier | 2005-01-04 09:58:16 +1100 (Tue, 04 Jan 2005) | 1 line


Switch to subversion
------------------------------------------------------------------------
r123911 | brett | 2005-01-03 09:48:57 +1100 (Mon, 03 Jan 2005) | 1 line


remove nagoya references
------------------------------------------------------------------------
r116173 | brett | 2004-10-23 22:11:51 +1000 (Sat, 23 Oct 2004) | 2 lines


remove old requires descriptions
</code></pre>
<p>So, the comand above should become:</p>
<pre><code>$ svn diff -rHEAD:123911
</code></pre>
<p>This occurs is because the order of the revisions is not identical to the order of dates in the repository. This is a side effect of loading CVS repositories whose history includes dates prior to the latest date in the Subversion repository.</p>
<h2>Frequently Asked Questions</h2>
<p><strong>We should I use 'svn lock'?</strong></p>
<p>Very rarely. Commits in subversion are transactional. This means that locks are almost always unnecessary.</p>
<p>An oft-quoted use case is to prevent concurrent editing of a large unmergeable binary document. However, for open development, good communication is preferable to locking even in this use case. A clear, timely post to the list to let your fellow developers know that you're going to start editing that huge PDF is better than locking the file.</p>
<p><strong>How frequently can I run a cron that connects to the repository?</strong></p>
<p>Hourly is fine. Please do not use programs that poll the repository more frequently than hourly. People who run automated scripts that continuously poll the repository wind up getting their access denied, which may impact other folks connecting through the same host. If you need to stay more in-sync than an hourly cron allows, subscribe your script to the relevant commit mailing list.</p>
<p>**How do I mirror the entire SVN repository for my experimental $foo?^^</p>
<p>First, ask yourself: do I really want the <em>entire</em> ASF repository? Generally most people really want only a single project. In that case, just check out that source directory from the repo.</p>
<p>If you really do want the entire ASF repository, <em>don't</em> use <code>svnsync</code>. Instead, start by looking here: <code>http://svn-master.apache.org/dump/</code>. Use that to bootstrap your repo.</p>
<p><strong>Why do I get a 403 error when I try to commit?</strong></p>
<p>Run <code>svn info</code> and check that the URL starts with <code>https://</code>. If it starts with <code>http://</code>, run:</p>
<pre><code>$ svn switch --relocate http://svn.apache.org https://svn.apache.org
</code></pre>
<p>If you still get 403 Forbidden errors, ask your PMC to double-check the authz file and LDAP/Unix group membership.</p>

        </div>
      </div>
    </div>
    </div>    
    <!-- footer -->
    <div class="row">
      <div class="large-12 medium-12 columns">
        <p style="font-style: italic; font-size: 0.8rem; text-align: center;">
          Copyright 2020, <a href="https://www.apache.org/">The Apache Software Foundation</a>, Licensed under the <a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a>.<br/>
          Apache&reg; and the Apache feather logo are trademarks of The Apache Software Foundation...
        </p>
      </div>
    </div>    
    <script src="/theme/js/vendor/jquery.js"></script>
    <script src="/theme/js/vendor/what-input.js"></script>
    <script src="/theme/js/vendor/foundation.js"></script>
    <script src="/theme/js/app.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>
